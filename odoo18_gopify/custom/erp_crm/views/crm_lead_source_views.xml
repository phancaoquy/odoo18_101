<?xml version="1.0" encoding="UTF-8"?>

<odoo>
  <!-- Views -->
  <record id='erp_crm_list_view' model='ir.ui.view'>
    <field name='name'>crm.lead.list</field>
    <field name='model'>crm.lead.source</field>
    <field name='arch' type='xml'>
      <list>
        <field name='name'></field>
        <field name='description'></field>
        <field name='company_id'></field>
        <field name='api_key' column_invisible='True'></field>
      </list>
    </field>
  </record>

  <!-- Search Views -->
  <record id='view_lead_source_search' model='ir.ui.view'>
    <field name='name'>crm.lead.source.search</field>
    <field name='model'>crm.lead.source</field>
    <field name='arch' type='xml'>
      <search string='Search On Me!'>
        <field name='name' string='Lead Source' />

        <separator />

        <!-- Filter -->
        <filter string="Active" name="active_filter" domain="[('active','=',True)]" />

        <!-- Group by -->
        <group expand="0" string="Group By">
          <filter string="Company" name="group_company"
            context="{'group_by':'company_id'}" />
          <filter string="Active" name="group_active"
            context="{'group_by':'active'}" />
        </group>

      </search>
    </field>
  </record>

  <!-- Form -->
  <record id='crm_lead_source_form_view'
    model='ir.ui.view'>
    <field name='name'>crm.lead.source.form</field>
    <field name='model'>crm.lead.source</field>
    <field name='arch' type='xml'>
      <form string='Lead Source'>
        <header>
          <button name='generate_api_key'
            type='object'
            string='Generate API key'
            class='btn-primary' />
        </header>

        <sheet>
          <group>
            <group>
              <field name='name' />
              <field name="company_id" options="{'no_create': False}" />
              <field name='api_key' />
              <field name='active' />
            </group>

          </group>

          <notebook>
            <page string='Leads'>
              <field name='crm_lead_ids'>
                <list>
                  <field name='name' />
                  <field name='stage_id' />
                  <field name='priority' />
                  <field name='expected_revenue' />
                </list>
              </field>
            </page>
          </notebook>
        </sheet>
      </form>
    </field>
  </record>

  <!-- Actions -->
  <record id="crm_lead_source_action" model="ir.actions.act_window">
    <field name="name">CRM0.1</field>
    <field name="res_model">crm.lead.source</field>
    <field name="view_mode">list,kanban,form</field>
    <field name='context'>{'search_default_active_filter': 1}</field>
  </record>
</odoo>